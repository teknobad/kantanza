<aside class="card pad">
  <h3>Günlük Kombin Tavsiyesi</h3>
  <div id="3dOutfit" style="width:100%; height:500px; background: var(--card); border-radius: 8px; overflow: hidden;"></div>
  <div class="outfit-info" style="margin-top: 16px;">
    <div class="today-outfit" id="todayOutfit">
      <h4>Bugünkü Kombin:</h4>
      <ul>
        <li><strong>Üst:</strong> <span id="outfitTop">-</span></li>
        <li><strong>Alt:</strong> <span id="outfitBottom">-</span></li>
        <li><strong>Ayakkabı:</strong> <span id="outfitShoes">-</span></li>
        <li><strong>Aksesuar:</strong> <span id="outfitAccessory">-</span></li>
      </ul>
    </div>
  </div>
</aside>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/loaders/GLTFLoader.js"></script>
<script>
// Günlük kombin verileri
const dailyOutfits = [
  {
    date: new Date().toDateString(),
    top: "Beyaz Oversize Gömlek",
    bottom: "Siyah Deri Pantolon", 
    shoes: "Kırmızı Topuklu Ayakkabı",
    accessory: "İnce Altın Kolye",
    colors: {
      top: "#FFFFFF",
      bottom: "#1a1a1a", 
      shoes: "#FF0000"
    }
  },
  {
    date: new Date(new Date().setDate(new Date().getDate() + 1)).toDateString(),
    top: "Siyah Basic T-shirt",
    bottom: "Mavi Kot Pantolon",
    shoes: "Beyaz Sneaker",
    accessory: "Gümüş Küpe",
    colors: {
      top: "#000000",
      bottom: "#1e3a8a",
      shoes: "#F8FAFC"
    }
  },
  {
    date: new Date(new Date().setDate(new Date().getDate() + 2)).toDateString(),
    top: "Pembe Triko Kazak",
    bottom: "Bej Etek",
    shoes: "Kahverengi Bot",
    accessory: "İnci Kolye",
    colors: {
      top: "#f472b6",
      bottom: "#fef3c7",
      shoes: "#78350f"
    }
  }
];

// 3D sahne oluşturma
let scene, camera, renderer, womanModel;

function init3DScene() {
  const container = document.getElementById('3dOutfit');
  
  // Sahne
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x151922);
  
  // Kamera
  camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
  camera.position.set(0, 1, 3);
  
  // Renderer
  renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
  renderer.setSize(container.clientWidth, container.clientHeight);
  renderer.shadowMap.enabled = true;
  container.appendChild(renderer.domElement);
  
  // Işıklar
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
  scene.add(ambientLight);
  
  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
  directionalLight.position.set(5, 10, 7);
  directionalLight.castShadow = true;
  scene.add(directionalLight);
  
  // Basit kadın figürü oluştur (geometri ile)
  createWomanFigure();
  
  // Zemin
  const floorGeometry = new THREE.PlaneGeometry(10, 10);
  const floorMaterial = new THREE.MeshStandardMaterial({ 
    color: 0x2b3240,
    roughness: 0.8,
    metalness: 0.2
  });
  const floor = new THREE.Mesh(floorGeometry, floorMaterial);
  floor.rotation.x = -Math.PI / 2;
  floor.receiveShadow = true;
  scene.add(floor);
  
  // Animasyon
  animate();
  
  // Responsive
  window.addEventListener('resize', onWindowResize);
}

function createWomanFigure() {
  // Vücut grupları
  const bodyGroup = new THREE.Group();
  
  // Gövde
  const bodyGeometry = new THREE.CylinderGeometry(0.3, 0.4, 1.2, 8);
  const bodyMaterial = new THREE.MeshStandardMaterial({ 
    color: 0xFFD700, // Altın sarısı - ten rengi yerine
    roughness: 0.7
  });
  const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
  body.position.y = 0.6;
  body.castShadow = true;
  bodyGroup.add(body);
  
  // Baş
  const headGeometry = new THREE.SphereGeometry(0.2, 16, 16);
  const headMaterial = new THREE.MeshStandardMaterial({ 
    color: 0xFFD700,
    roughness: 0.7
  });
  const head = new THREE.Mesh(headGeometry, headMaterial);
  head.position.y = 1.5;
  head.castShadow = true;
  bodyGroup.add(head);
  
  // Bacaklar
  const legGeometry = new THREE.CylinderGeometry(0.1, 0.1, 0.8, 8);
  const legMaterial = new THREE.MeshStandardMaterial({ 
    color: 0xFFD700,
    roughness: 0.7
  });
  
  const leftLeg = new THREE.Mesh(legGeometry, legMaterial);
  leftLeg.position.set(-0.15, -0.4, 0);
  leftLeg.castShadow = true;
  bodyGroup.add(leftLeg);
  
  const rightLeg = new THREE.Mesh(legGeometry, legMaterial);
  rightLeg.position.set(0.15, -0.4, 0);
  rightLeg.castShadow = true;
  bodyGroup.add(rightLeg);
  
  // Kollar
  const armGeometry = new THREE.CylinderGeometry(0.08, 0.08, 0.6, 8);
  const armMaterial = new THREE.MeshStandardMaterial({ 
    color: 0xFFD700,
    roughness: 0.7
  });
  
  const leftArm = new THREE.Mesh(armGeometry, armMaterial);
  leftArm.position.set(-0.4, 0.8, 0);
  leftArm.rotation.z = Math.PI / 4;
  leftArm.castShadow = true;
  bodyGroup.add(leftArm);
  
  const rightArm = new THREE.Mesh(armGeometry, armMaterial);
  rightArm.position.set(0.4, 0.8, 0);
  rightArm.rotation.z = -Math.PI / 4;
  rightArm.castShadow = true;
  bodyGroup.add(rightArm);
  
  scene.add(bodyGroup);
  womanModel = bodyGroup;
  
  // İlk kombin yükle
  loadTodayOutfit();
}

function loadTodayOutfit() {
  const today = new Date().toDateString();
  const todayOutfit = dailyOutfits.find(outfit => outfit.date === today) || dailyOutfits[0];
  
  // Kombin bilgilerini göster
  document.getElementById('outfitTop').textContent = todayOutfit.top;
  document.getElementById('outfitBottom').textContent = todayOutfit.bottom;
  document.getElementById('outfitShoes').textContent = todayOutfit.shoes;
  document.getElementById('outfitAccessory').textContent = todayOutfit.accessory;
  
  // 3D modeli güncelle (basit renk değişiklikleri)
  updateOutfitColors(todayOutfit.colors);
}

function updateOutfitColors(colors) {
  if (!womanModel) return;
  
  // Burada kıyafet parçalarının renklerini güncelleyebilirsiniz
  // Şu anlık basit bir gösterim için modelin genel rengini değiştiriyoruz
  womanModel.children.forEach(child => {
    if (child.material) {
      // Kıyafet renklerini uygula (basit gösterim)
      child.material.color.set(colors.top);
    }
  });
}

function animate() {
  requestAnimationFrame(animate);
  
  if (womanModel) {
    womanModel.rotation.y += 0.01; // Yavaş dönüş
  }
  
  renderer.render(scene, camera);
}

function onWindowResize() {
  const container = document.getElementById('3dOutfit');
  camera.aspect = container.clientWidth / container.clientHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(container.clientWidth, container.clientHeight);
}

// Sayfa yüklendiğinde 3D sahneyi başlat
document.addEventListener('DOMContentLoaded', init3DScene);
</script>
